# This configuration file was automatically generated by Gitpod.
# Please adjust to your needs (see https://www.gitpod.io/docs/introduction/learn-gitpod/gitpod-yaml)
# and commit this file to your remote git repository to share the goodness with others.

# Learn more from ready-to-use templates: https://www.gitpod.io/docs/introduction/getting-started/quickstart

# https://github.com/meysholdt/laravel-apache-mysql-php-in-gitpod-example

tasks:
  - name: npm
    init: npm install
    command: npm run watch
  - name: php
    init: composer install
  - name: Apache
    env:
      OWMF_ENV_FILE_PATH: /workspace/osm-wikidata-map-framework/.env
    init: cp .env.example "$OWMF_ENV_FILE_PATH" && sed -i 's|/var/www/html|/workspace/osm-wikidata-map-framework/public|' "$OWMF_ENV_FILE_PATH"
    command: >
        apachectl start;
        multitail /var/log/apache2/error.log -I /var/log/apache2/access.log

ports:
  - name: Apache
    port: 8001
    onOpen: ignore
  - name: npm
    port: 8888
    onOpen: ignore

vscode:
  extensions:
    - dbaeumer.vscode-eslint
    - bmewburn.vscode-intelephense-client
    - mhutchie.git-graph
