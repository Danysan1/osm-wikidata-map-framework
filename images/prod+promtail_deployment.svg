<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="762px" preserveAspectRatio="none" style="width:1150px;height:762px;background:#FFFFFF;" version="1.1" viewBox="0 0 1150 762" width="1150px" zoomAndPan="magnify"><defs/><g><!--MD5=[6388e1a0d028400310670bd3eeb67932]
cluster Grafana--><g id="cluster_Grafana"><path d="M627.8522,19.3353 C630.5266,13.0439 635.239,11.505 640.514,16.3887 C644.3729,9.6659 648.5516,8.3591 654.2759,14.3732 C657.3359,6.7317 664.0496,6 668.2634,13.2925 C672.5767,6.7099 677.2542,8.3411 680.9805,13.907 C686.4241,8.5162 692.0722,8.9103 695.924,15.838 C702.2915,10.4615 707.2126,12.1406 709.5143,20.0096 C717.2101,22.8502 716.7236,29.4339 711.1509,33.8442 C717.1374,38.5152 717.01,42.6064 710.1558,46.2472 C717.1323,49.0573 719.0138,55.1876 712.4645,60.2308 C718.4008,64.1405 718.6269,70.5621 712.017,74.066 C717.5131,79.2912 718.6158,83.8507 710.9408,88.0632 C716.8015,93.8065 717.5823,99.7491 708.6513,103.2646 C704.961,109.1252 699.7849,108.7706 696.0502,103.314 C693.2986,111.32 686.479,110.7431 682.1718,104.8696 C678.4721,111.1177 672.2218,112.4934 668.1773,105.2266 C664.2869,111.6092 658.1049,111.5201 655.0016,104.4553 C649.4783,111.7367 644.8486,111.1334 639.8988,103.8601 C635.4933,109.34 631.8738,108.5128 628.1571,103.1166 C621.0924,99.8247 618.3757,94.8948 624.707,88.4514 C616.6799,86.2799 616.4598,81.9111 620.9178,75.9541 C612.2672,72.6158 612.0598,65.914 619.2947,60.8667 C614.634,55.1535 614.8234,50.8478 622.2613,47.9033 C616.0382,42.2846 617.3662,36.3941 624.8766,33.2219 C618.9773,27.989 620.0406,21.6302 627.8522,19.3353 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="55" x="639.5" y="37.4186">Grafana</text></g><!--MD5=[979da56a7f83e2393dc758167ae295d0]
cluster Server--><g id="cluster_Server"><rect fill="none" height="464" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:1.0;" width="1110" x="7" y="175.8854"/><rect fill="none" height="10" style="stroke:#181818;stroke-width:1.0;" width="15" x="1097" y="180.8854"/><rect fill="none" height="2" style="stroke:#181818;stroke-width:1.0;" width="4" x="1095" y="182.8854"/><rect fill="none" height="2" style="stroke:#181818;stroke-width:1.0;" width="4" x="1095" y="186.8854"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="48" x="538" y="203.4186">Server</text></g><!--MD5=[5ec7eedd57310648f8059ffb2621ca4b]
cluster docker--><g id="cluster_docker"><rect fill="none" height="284" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:1.0;" width="990" x="103" y="236.8854"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="288" x="454" y="253.4186">Docker Compose --profile 'prod+promtail'</text></g><!--MD5=[1378079a3eb208dbe7e22fc54a3fce11]
cluster promtail--><g id="cluster_promtail"><polygon fill="none" points="127,290.8854,137,280.8854,728,280.8854,728,383.8854,718,393.8854,127,393.8854,127,290.8854" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="718" x2="728" y1="290.8854" y2="280.8854"/><line style="stroke:#181818;stroke-width:1.0;" x1="127" x2="718" y1="290.8854" y2="290.8854"/><line style="stroke:#181818;stroke-width:1.0;" x1="718" x2="718" y1="290.8854" y2="393.8854"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="57" x="395" y="308.4186">promtail</text></g><!--MD5=[5a8b7ee3eae4de21b4edbcb4d9e5d3d3]
cluster oem-web-prod--><g id="cluster_oem-web-prod"><polygon fill="none" points="831,359.8854,841,349.8854,1077,349.8854,1077,494.8854,1067,504.8854,831,504.8854,831,359.8854" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1067" x2="1077" y1="359.8854" y2="349.8854"/><line style="stroke:#181818;stroke-width:1.0;" x1="831" x2="1067" y1="359.8854" y2="359.8854"/><line style="stroke:#181818;stroke-width:1.0;" x1="1067" x2="1067" y1="359.8854" y2="504.8854"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="102" x="899" y="377.4186">oem-web-prod</text></g><g id="cluster_##19"><path d="M910.9229,680.304 C913.7565,673.6706 919.698,672.3137 924.0315,678.8061 C927.7451,671.3357 936.0188,670.7609 940.9217,677.3804 C944.575,670.5246 951.1018,668.8272 955.7939,676.3024 C960.7264,669.8319 966.138,668.2868 971.4468,675.8837 C974.0295,666.8338 980.511,664.9209 986.8625,672.3604 C992.305,662.9725 998.3805,664.6961 1004.3413,671.8116 C1006.4602,665.5667 1012.5951,664.3023 1017.1468,668.9522 C1022.2951,660.4594 1029.2424,661.5827 1033.268,670.0213 C1040.3896,663.1438 1046.6212,664.4925 1049.2994,674.2926 C1053.5486,665.8188 1059.7009,665.3165 1064.9695,673.3234 C1071.3257,665.2869 1079.3725,667.1215 1082.1415,676.8005 C1085.7116,670.8834 1091.6998,670.7652 1095.0583,677.025 C1100.2143,670.4435 1106.4792,670.352 1111.0358,677.712 C1116.0825,671.8736 1123.6968,672.2686 1126.7377,680.0283 C1136.9267,682.7704 1138.227,688.8862 1131.4573,696.4903 C1140.8241,699.1585 1143.2372,705.3289 1135.818,712.5539 C1141.7614,718.9284 1140.8715,723.6564 1133.2233,727.7029 C1138.6322,734.2653 1137.6921,741.1818 1128.9167,743.9948 C1122.9675,752.5645 1115.6059,750.2481 1111.1809,742.3529 C1107.5424,749.1461 1101.9907,750.0569 1097.7573,742.9265 C1093.8334,751.5095 1085.9453,752.6852 1079.551,745.8423 C1074.3626,752.6462 1068.7093,752.2414 1065.1702,744.2402 C1060.3975,751.8124 1055.1883,752.9542 1049.1158,745.6422 C1045.3043,753.3335 1039.0925,753.9573 1034.6878,746.196 C1030.0402,754.2783 1025.0365,753.8469 1019.6339,746.955 C1012.364,755.1935 1006.3096,753.1744 1001.621,744.2464 C997.7204,749.8731 992.3147,751.1213 988.1081,744.5865 C982.019,753.4361 976.6999,753.9391 970.6522,744.5469 C965.54,751.7659 960.2772,751.6569 955.5704,744.1322 C950.8575,750.8352 945.0057,750.5067 940.675,743.7104 C936.4358,750.9902 929.0367,751.1689 924.9272,743.5731 C919.8444,752.6891 914.4734,752.1779 908.6006,744.3335 C897.8455,741.4238 897.3386,734.201 904.1979,726.8545 C895.3248,724.5826 893.4403,716.9735 900.1355,710.7697 C894.3533,703.3213 895.6386,698.0985 905.3202,696.1248 C899.741,688.3629 902.681,683.1714 910.9229,680.304 " fill="none" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[331b67947ba2840a66d34c20f83daee9]
entity Loki--><g id="elem_Loki"><rect fill="#F1F1F1" height="47.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="66" x="634" y="45.8854"/><rect fill="#F1F1F1" height="10" style="stroke:#181818;stroke-width:0.5;" width="15" x="680" y="50.8854"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="678" y="52.8854"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="678" y="56.8854"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="26" x="649" y="80.4186">Loki</text></g><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="16" x="306" y="154.8092">80</text><rect fill="#F1F1F1" height="12" style="stroke:#181818;stroke-width:1.5;" width="12" x="308" y="169.8854"/><!--MD5=[fe722160842ab3083f161a2a7f9d8b06]
entity promLoc--><g id="elem_promLoc"><path d="M159.5,567.8854 L200.5,567.8854 A3.75,3.75 0 0 1 203,570.3854 L210,588.8854 L234.5,588.8854 A2.5,2.5 0 0 1 237,591.3854 L237,620.9948 A2.5,2.5 0 0 1 234.5,623.4948 L159.5,623.4948 A2.5,2.5 0 0 1 157,620.9948 L157,570.3854 A2.5,2.5 0 0 1 159.5,567.8854 " fill="#F1F1F1" style="stroke:#181818;stroke-width:0.5;"/><line style="stroke:#181818;stroke-width:0.5;" x1="157" x2="210" y1="588.8854" y2="588.8854"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="50" x="167" y="610.4186">promtail</text></g><!--MD5=[3b39491c4ae0f967d0fda10cc6fa8ffe]
entity logLoc--><g id="elem_logLoc"><path d="M288,567.8854 L329,567.8854 A3.75,3.75 0 0 1 331.5,570.3854 L338.5,588.8854 L360,588.8854 A2.5,2.5 0 0 1 362.5,591.3854 L362.5,620.9948 A2.5,2.5 0 0 1 360,623.4948 L288,623.4948 A2.5,2.5 0 0 1 285.5,620.9948 L285.5,570.3854 A2.5,2.5 0 0 1 288,567.8854 " fill="#F1F1F1" style="stroke:#181818;stroke-width:0.5;"/><line style="stroke:#181818;stroke-width:0.5;" x1="285.5" x2="338.5" y1="588.8854" y2="588.8854"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="47" x="295.5" y="610.4186">/var/log</text></g><!--MD5=[8a1bc4818159efcbc0ef1e4cbabd56ff]
entity contLoc--><g id="elem_contLoc"><path d="M400,567.8854 L441,567.8854 A3.75,3.75 0 0 1 443.5,570.3854 L450.5,588.8854 L584,588.8854 A2.5,2.5 0 0 1 586.5,591.3854 L586.5,620.9948 A2.5,2.5 0 0 1 584,623.4948 L400,623.4948 A2.5,2.5 0 0 1 397.5,620.9948 L397.5,570.3854 A2.5,2.5 0 0 1 400,567.8854 " fill="#F1F1F1" style="stroke:#181818;stroke-width:0.5;"/><line style="stroke:#181818;stroke-width:0.5;" x1="397.5" x2="450.5" y1="588.8854" y2="588.8854"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="159" x="407.5" y="610.4186">/var/lib/docker/containers</text></g><!--MD5=[875c34bedf132272c73e8bf9e31e6d44]
entity promInst--><g id="elem_promInst"><rect fill="#F1F1F1" height="47.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="90" x="622" y="325.8854"/><rect fill="#F1F1F1" height="10" style="stroke:#181818;stroke-width:0.5;" width="15" x="692" y="330.8854"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="690" y="332.8854"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="690" y="336.8854"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="50" x="637" y="360.4186">promtail</text></g><!--MD5=[1a8b14acf4dc880aa72774a119d7c5e8]
entity promRem--><g id="elem_promRem"><path d="M146,321.8854 L187,321.8854 A3.75,3.75 0 0 1 189.5,324.3854 L196.5,342.8854 L248,342.8854 A2.5,2.5 0 0 1 250.5,345.3854 L250.5,374.9948 A2.5,2.5 0 0 1 248,377.4948 L146,377.4948 A2.5,2.5 0 0 1 143.5,374.9948 L143.5,324.3854 A2.5,2.5 0 0 1 146,321.8854 " fill="#F1F1F1" style="stroke:#181818;stroke-width:0.5;"/><line style="stroke:#181818;stroke-width:0.5;" x1="143.5" x2="196.5" y1="342.8854" y2="342.8854"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77" x="153.5" y="364.4186">/etc/promtail</text></g><!--MD5=[25ffd4bc1314c23ec09359623d3cc278]
entity logRem--><g id="elem_logRem"><path d="M288,321.8854 L329,321.8854 A3.75,3.75 0 0 1 331.5,324.3854 L338.5,342.8854 L360,342.8854 A2.5,2.5 0 0 1 362.5,345.3854 L362.5,374.9948 A2.5,2.5 0 0 1 360,377.4948 L288,377.4948 A2.5,2.5 0 0 1 285.5,374.9948 L285.5,324.3854 A2.5,2.5 0 0 1 288,321.8854 " fill="#F1F1F1" style="stroke:#181818;stroke-width:0.5;"/><line style="stroke:#181818;stroke-width:0.5;" x1="285.5" x2="338.5" y1="342.8854" y2="342.8854"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="47" x="295.5" y="364.4186">/var/log</text></g><!--MD5=[9e1b1bfa93650452d9caff88db08b3e1]
entity contRem--><g id="elem_contRem"><path d="M400,321.8854 L441,321.8854 A3.75,3.75 0 0 1 443.5,324.3854 L450.5,342.8854 L584,342.8854 A2.5,2.5 0 0 1 586.5,345.3854 L586.5,374.9948 A2.5,2.5 0 0 1 584,377.4948 L400,377.4948 A2.5,2.5 0 0 1 397.5,374.9948 L397.5,324.3854 A2.5,2.5 0 0 1 400,321.8854 " fill="#F1F1F1" style="stroke:#181818;stroke-width:0.5;"/><line style="stroke:#181818;stroke-width:0.5;" x1="397.5" x2="450.5" y1="342.8854" y2="342.8854"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="159" x="407.5" y="364.4186">/var/lib/docker/containers</text></g><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="16" x="841" y="328.8092">80</text><rect fill="#F1F1F1" height="12" style="stroke:#181818;stroke-width:1.5;" width="12" x="843" y="343.8854"/><!--MD5=[a0fef4f34cb3559b44f1c4ed44c10eb8]
entity Apache--><g id="elem_Apache"><rect fill="#F1F1F1" height="47.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="88" x="973" y="440.8854"/><rect fill="#F1F1F1" height="10" style="stroke:#181818;stroke-width:0.5;" width="15" x="1041" y="445.8854"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="1039" y="447.8854"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="1039" y="451.8854"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="48" x="988" y="475.4186">Apache</text></g><!--MD5=[7468467f3b6b392f1d176d828c753b77]
entity db--><g id="elem_db"><path d="M916.5,696.8854 C916.5,686.8854 1017,686.8854 1017,686.8854 C1017,686.8854 1117.5,686.8854 1117.5,696.8854 L1117.5,723.4948 C1117.5,733.4948 1017,733.4948 1017,733.4948 C1017,733.4948 916.5,733.4948 916.5,723.4948 L916.5,696.8854 " fill="#F1F1F1" style="stroke:#181818;stroke-width:0.5;"/><path d="M916.5,696.8854 C916.5,706.8854 1017,706.8854 1017,706.8854 C1017,706.8854 1117.5,706.8854 1117.5,696.8854 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="181" x="926.5" y="725.4186">PostGIS DB or Overpass API</text></g><!--MD5=[e9dede37b31fdda9664526f66258b036]
entity Browser--><g id="elem_Browser"><ellipse cx="314" cy="39.3854" fill="#F1F1F1" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M314,47.3854 L314,74.3854 M301,55.3854 L327,55.3854 M314,74.3854 L301,89.3854 M314,74.3854 L327,89.3854 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="51" x="288.5" y="105.4186">Browser</text></g><!--MD5=[eb490ff470c5a146dc7f61e77394fe28]
link Apache to db--><g id="link_Apache_db"><path d="M1017,489.2354 C1017,534.3654 1017,633.3954 1017,681.7354 " fill="none" id="Apache-to-db" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="1017,686.8154,1021,677.8154,1017,681.8154,1013,677.8154,1017,686.8154" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[5a991882528c63219e1b5976c28aec7f]
link Browser to 80docker--><g id="link_Browser_80docker"><path d="M314,109.0254 C314,128.9254 314,151.7654 314,164.6354 " fill="none" id="Browser-to-80docker" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="314,169.8054,318,160.8054,314,164.8054,310,160.8054,314,169.8054" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[cb2118ce9ce00fc0fce55828fc161e98]
link 80docker to 80webProd--><g id="link_80docker_80webProd"><path d="M320.07,176.9554 C365.43,177.6054 651.73,183.1254 728,220.8854 C784.52,248.8654 828.51,314.8454 843.47,339.4354 " fill="none" id="80docker-to-80webProd" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="846.07,343.7754,844.8695,334,843.4975,339.4879,838.0096,338.1159,846.07,343.7754" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[77c095f98376f44221d62d381d6ea1ba]
reverse link Apache to 80webProd--><g id="link_Apache_80webProd"><path d="M978.35,437.8854 C937.18,410.1954 875.26,368.5454 855.38,355.1754 " fill="none" id="Apache-backto-80webProd" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="982.52,440.6954,977.2899,432.35,978.373,437.9022,972.8207,438.9853,982.52,440.6954" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[50db60e91649bd4b7930dc70ac143265]
link promRem to promLoc--><g id="link_promRem_promLoc"><path d="M197,377.9254 C197,424.8354 197,520.7354 197,567.7154 " fill="none" id="promRem-promLoc" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="40" x="198" y="470.3805">volume</text></g><!--MD5=[22fcf1e33b40493c5e2fc9dd2c31ffd5]
link logRem to logLoc--><g id="link_logRem_logLoc"><path d="M324,377.9254 C324,424.8354 324,520.7354 324,567.7154 " fill="none" id="logRem-logLoc" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="40" x="325" y="470.3805">volume</text></g><!--MD5=[5ab18d128b9e03ee7a87eeb6c6f98176]
link contRem to contLoc--><g id="link_contRem_contLoc"><path d="M492,377.9254 C492,424.8354 492,520.7354 492,567.7154 " fill="none" id="contRem-contLoc" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="40" x="493" y="470.3805">volume</text></g><!--MD5=[ca91e133679fb377bc773829be79666e]
reverse link Loki to promInst--><g id="link_Loki_promInst"><path d="M667,99.2254 C667,154.2854 667,274.7154 667,325.5354 " fill="none" id="Loki-backto-promInst" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="667,94.1054,663,103.1054,667,99.1054,671,103.1054,667,94.1054" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[c36c1f187fa6a26f7f173cd1b81d7bf1]
@startuml prod+promtail_deployment

actor Browser
cloud Grafana {
  component Loki
}
component Server {
  port "80" as 80docker
  rectangle "Docker Compose - -profile 'prod+promtail'" as docker {
    node promtail {
      component promtail as promInst
      folder "/etc/promtail" as promRem
      folder "/var/log" as logRem
      folder "/var/lib/docker/containers" as contRem
    }
    node "oem-web-prod" {
      port "80" as 80webProd
      component Apache
    }
  }
  folder "promtail" as promLoc
  folder "/var/log" as logLoc
  folder "/var/lib/docker/containers" as contLoc
}
cloud {
  database "PostGIS DB or Overpass API" as db
}

Apache - - -> db

Browser - -> 80docker

80docker - -> 80webProd

Apache <- - 80webProd

promRem ... promLoc : volume
logRem ... logLoc : volume
contRem ... contLoc : volume
Loki <- - - promInst

@enduml

PlantUML version 1.2022.7(Mon Aug 22 19:01:30 CEST 2022)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: Cp1252
Language: it
Country: IT
--></g></svg>